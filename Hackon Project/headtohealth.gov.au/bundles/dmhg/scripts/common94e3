(function(){window.accUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n==="x"?t:t&3|8;return i.toString(16)})}})(),function(){function n(n){function e(n){return $.expr.filters.visible(n)&&!$(n).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden"}).length}var t,i,r,u=n.nodeName.toLowerCase(),f=!isNaN($.attr(n,"tabindex"));return"area"===u?(t=n.parentNode,i=t.name,!n.href||!i||t.nodeName.toLowerCase()!=="map")?!1:(r=$("img[usemap=#"+i+"]")[0],!!r&&e(r)):(/^(input|select|textarea|button|object)$/.test(u)?!n.disabled:"a"===u?n.href||f:f)&&e(n)}$.extend($.expr[":"],{focusable:function(t){return n(t,!isNaN($.attr(t,"tabindex")))},tabbable:function(t){var i=$.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(t,!r)}})}(),function(){var n=function(){var n=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(n)?"windows-phone":/android/i.test(n)?"android":/iPad|iPhone|iPod/.test(n)&&!window.MSStream?"ios":"unknown"};window.accIsiOS=function(){return n()==="ios"};window.accIsAndroid=function(){return n()==="android"}}(),function(){var n=function(n){var t=n.attr("tabindex");n.attr("tabindex",-1);n.focus();t===undefined?n.removeAttr("tabindex"):n.attr("tabindex",t)};window.accFocus=function(t){n(t)}}(),function(){var t=function(n){var i=n.parents().addBack().filter("[aria-hidden=true]").length>0,r=n.attr("data-acc-is-untabbable")||"false",t;r!==i.toString()&&(i?(t=n.attr("tabindex"),t!==undefined?n.attr("data-acc-old-tabindex",t):n.attr("data-acc-old-tabindex","none"),n.attr("tabindex","-1"),n.attr("data-acc-is-untabbable","true")):(t=n.attr("data-acc-old-tabindex"),t==="none"?n.removeAttr("tabindex"):n.attr("tabindex",t),n.removeAttr("data-acc-old-tabindex"),n.removeAttr("data-acc-is-untabbable")))},i=function(){$("*").each(function(n,i){t($(i))})},n=-1;$(document).ready(function(){new MutationObserver(function(){n>0&&clearTimeout(n);n=setTimeout(i,1)}).observe(document.body,{attributes:!0,attributeFilter:["aria-hidden"],subtree:!0,childList:!0})});$("head").append('<style type="text/css">    [data-acc-is-untabbable]:focus {        outline: none !important;    }<\/style>')}(),function(){window.accTrapTabbing=function(n,t){$(n).attr("data-acc-force-tabbable",!0);$("*").each(function(){var r=$(this).parents().addBack(),u=r.add($(this).find("*")),f=u.is(n)&&!r.is(t),i;f||(i=$(this).attr("aria-hidden"),i===undefined?$(this).attr("data-acc-old-aria-hidden","none"):$(this).attr("data-acc-old-aria-hidden",i),$(this).attr("aria-hidden",!0))})};window.accUntrapTabbing=function(){$("[data-acc-force-tabbable]").removeAttr("data-acc-force-tabbable");$("*").each(function(){var n=$(this).attr("data-acc-old-aria-hidden");n==="none"?$(this).removeAttr("aria-hidden"):n!==undefined&&$(this).attr("aria-hidden",n);$(this).removeAttr("data-acc-old-aria-hidden")})}}(),function(){var t=0,n=function(){return 0};window.accSetStickyHeaderHeightFunction=function(t){n=t};window.accSmoothScrollToElement=function(i,r){var e,u;if(r===undefined&&(r=!1),i=$(i),i.length){e=++t;u=$(window).scrollTop();accFocus(i);$(window).scrollTop(u);var o=n(),f=i.offset().top,s=f-u,l=s+i.height();if(!(s>o)||!(l<$(window).height())){var h=f-o,a=1/20,c=function(i){var o,s;e===t&&(r&&(o=f-n(),Math.abs(h-o)>10)||(s=i<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1,$(window).scrollTop(u+s*(h-u)),i<1&&requestAnimationFrame(function(){c(i+a)})))};c(0)}}}}(),function(){function f(){i=$(window).scrollTop();requestAnimationFrame(f)}var n=!1,e=HTMLElement.prototype.focus,u,t,i,r;HTMLElement.prototype.focus=function(){n=!0;e.apply(this,arguments);n=!1};u=jQuery.fn.focus;jQuery.fn.focus=function(){n=!0;var t=u.apply(this,arguments);return n=!1,t};t=!1;$(document).on("keydown",function(){t=!0});$(document).on("keyup",function(){setTimeout(function(){t=!1},500)});i=$(window).scrollTop();requestAnimationFrame(f);r=undefined;$(document).on("focus","*",function(u){var f=$(u.target);n||t&&(f.is("[data-dismiss]")||r!==u.target&&(r=u.target,$(window).scrollTop(i),accSmoothScrollToElement(u.target,!0)))})}(),function(){var n="data-acc-aria-hide-selector-when-unchecked",t="input[type=checkbox]["+n+"]",i=function(){var t=$(this).is(":checked"),i=$(this).attr(n),r=$(i);r.attr("aria-hidden",t?"false":"true")};$("body").on("change",t,i);$(t).each(i)}(),function(){$("body").on("click","[data-acc-smooth-scroll-to-selector-on-click]",function(n){var i,t,r;n.preventDefault();i=$(this).attr("data-acc-smooth-scroll-to-selector-on-click");i!==undefined&&i.length>0&&(t=$(i),t.length>0&&(r=t.filter(":visible:not([aria-hidden]):not([data-acc-is-untabbable]):first"),r.length>0&&(t=r)),accSmoothScrollToElement(t))})}(),function(){$("body").on("click","[data-acc-expand-collapse-selector-on-click]",function(n){n.preventDefault();var i=$(this).attr("data-acc-expand-collapse-selector-on-click--text-selector"),u=$(this).attr("data-acc-expand-collapse-selector-on-click--expanded-text"),f=$(this).attr("data-acc-expand-collapse-selector-on-click--collapsed-text"),e=$(this).attr("data-acc-expand-collapse-selector-on-click--expanded-aria-label"),o=$(this).attr("data-acc-expand-collapse-selector-on-click--collapsed-aria-label"),r=i?$(this).find(i):$(this),t=$("#"+$(this).attr("aria-controls"));$(this).attr("aria-expanded")==="true"?($(this).attr("aria-expanded","false"),$(this).attr("aria-label",o),t.attr("aria-expanded","false"),r.text(f),clearTimeout(t.data("data-acc-expand-collapse-selector-on-click_timeout")),t.data("data-acc-expand-collapse-selector-on-click_timeout",setTimeout(function(){t.hide()},1e3))):(clearTimeout(t.data("data-acc-expand-collapse-selector-on-click_timeout")),t.show(),$(this).attr("aria-expanded","true"),$(this).attr("aria-label",e),t.attr("aria-expanded","true"),r.text(u),accSmoothScrollToElement(t))});var n=function(){$("[data-acc-expand-collapse-selector-on-click]").not("[data-acc-expand-collapse-selector-on-click_setup]").each(function(){var n=$(this).attr("data-acc-expand-collapse-selector-on-click"),t=!!$(this).attr("data-acc-expand-collapse-selector-on-click--is-expanded"),r=$(this).attr("data-acc-expand-collapse-selector-on-click--text-selector"),f=$(this).attr("data-acc-expand-collapse-selector-on-click--expanded-text"),e=$(this).attr("data-acc-expand-collapse-selector-on-click--collapsed-text"),o=$(this).attr("data-acc-expand-collapse-selector-on-click--expanded-aria-label"),s=$(this).attr("data-acc-expand-collapse-selector-on-click--collapsed-aria-label"),i=n==="::next"?$(this).next():n==="::prev"?$(this).prev():$(n).first(),u;n==="::next"?n=$(this).next():n==="::prev"&&(n=$(this).next());u=r?$(this).find(r):$(this);i.attr("id")||i.attr("id",accUUID());$(this).attr("aria-controls",i.attr("id"));$(this).attr("aria-expanded",t);$(this).attr("aria-label",t?o:s);u.text(t?f:e);i.attr("aria-expanded",t);t||i.hide();$(this).attr("data-acc-expand-collapse-selector-on-click_setup","true")})};$(document).ready(function(){new MutationObserver(function(){n()}).observe(document.body,{attributes:!0,attributeFilter:["data-acc-expand-collapse-selector-on-click"],subtree:!0,childList:!0})})}(),function(){if($("html").is("[data-acc-enable-component-select]")){var n=function(){$("[data-acc-component-select]").each(function(){var t,i;$(this).removeAttr("data-acc-component-select");var r=$(this).attr("id"),u=$("<span />").insertAfter($(this)),n=$('<szn-select data-szn-select--standalone class="'+r+'" />');n.append($(this));n.append("<span data-szn-select--ui />");n.insertBefore(u);u.remove();t=n.get(0);i=new MutationObserver(function(){i.disconnect();t.dropdownClassName=r});i.observe(t,{subtree:!0,childList:!0})})};$(document).ready(function(){new MutationObserver(function(){n()}).observe(document.body,{attributes:!0,attributeFilter:["data-acc-component-select"],subtree:!0,childList:!0})});$("head").append("<script>    if (!window.WeakSet || !window.Proxy || !Array.prototype.includes) {        document.write('<script src=\"https://cdn.jsdelivr.net/npm/babel-polyfill@6.26.x/browser.js\"><' + '/script>');    }<\/script><script>    if (!(\"firstElementChild\" in document.createDocumentFragment())) {        document.write('<script src=\"https://cdn.jsdelivr.net/npm/@seznam/szn-select@1.x/polyfill/modern-ie.min.js\"><' + '/script>');    }<\/script><script>    if (!window.MutationObserver) {        window.module = {};        document.write('<script src=\"https://cdn.jsdelivr.net/npm/mutation-observer@1.x/index.js\"><' + '/script>');    }<\/script><script>    document.write('<script src=\"https://cdn.jsdelivr.net/npm/@seznam/szn-select@1.x/loader.min.js\"><' + '/script>');<\/script><style type=\"text/css\">    [data-acc-component-select] {        display: none !important;    }    szn-select:not([data-szn-select--ready]) {        display: none !important;    }<\/style>")}}();
function getPageId(){return $("#page-id").val()}function resizeTextBox(n){var t=n.width(),i=n.height();for(n.css("word-wrap","break-word"),n.css("word-break","break-all");t>0&&n.height()===i;)n.width(--t);n.css("word-wrap","");n.css("word-break","");n.css("width","");t&&n.css("max-width",t+1)}function uuid(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(t=="x"?i:i&3|8).toString(16)})}function copyToClipboard(n){var t,i;n=$(n)[0];navigator.userAgent.match(/ipad|iphone/i)?(t=document.createRange(),t.selectNodeContents(n),i=window.getSelection(),i.removeAllRanges(),i.addRange(t),n.setSelectionRange(0,999999)):n.select();document.execCommand("copy")}function isNavVisible(){return isTabletOrMobile()?$("#nav.moblet-show").length:$(".top-nav-item.selected").length}function isLargeDesktop(){return $(window).outerWidth()>=Constants.ScreenWidth.LargeDesktop}function isDesktop(){return $(window).outerWidth()>=Constants.ScreenWidth.Desktop}function isTabletOrMobile(){return $(window).outerWidth()<Constants.ScreenWidth.Desktop}function isMobile(){return $(window).outerWidth()<=Constants.ScreenWidth.Mobile}function isBigMobile(){return $(window).outerWidth()<=Constants.ScreenWidth.BigMobile}function isTablet(){return isTabletOrMobile()&&!isMobile()}function isSmallTablet(){return $(window).outerWidth()<=Constants.ScreenWidth.SmallTablet}function isMobileSafari(){return/iP(ad|hone|od).+Version\/[\d\.]+.*Safari/i.test(navigator.userAgent)}function isMac(){return/^.*?Mac.*?$/i.test(navigator.platform)}function isSafari(){return/^.*?Safari.*?$/i.test(navigator.userAgent)}function isDesktopSafari(){return isMac()&&isSafari()}function getDeviceType(){return isDesktop()?Constants.Device.Desktop:isTablet()?Constants.Device.Tablet:isMobile()?Constants.Device.Mobile:void 0}function detectIE(){var n=window.navigator.userAgent,i=n.indexOf("MSIE "),u,r,t;return i>0?parseInt(n.substring(i+5,n.indexOf(".",i)),10):(u=n.indexOf("Trident/"),u>0)?(r=n.indexOf("rv:"),parseInt(n.substring(r+3,n.indexOf(".",r)),10)):(t=n.indexOf("Edge/"),t>0)?parseInt(n.substring(t+5,n.indexOf(".",t)),10):!1}function slugify(n){if(n!=undefined&&n!=null){const t="ąàáäâãåæèéëêęìíïîòóöôõøùúüûñłçćßÿœæŕśńṕẃǵǹḿǘẍźḧżź·/_,:;",i="aaaaaaaaeeeeeiiiioooooouuuunlccsyoarsnpwgnmuxzhzz------",r=new RegExp(t.split("").join("|"),"g");return n.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(r,function(n){return i.charAt(t.indexOf(n))}).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}return""}function getUrlParameter(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.search);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}function printIt(n){function t(n,t,i){if(detectIE()===!1)t?$(n).attr("aria-pressed","true"):$(n).removeAttr("aria-pressed");else{var r=document.querySelectorAll(i);t?r[0].setAttribute("aria-pressed",!0):(r[0].setAttribute("aria-pressed",!1),r[0].removeAttribute("aria-pressed"))}}window.onbeforeprint=t(n,!0,"button.print-button");window.print();window.onafterprint=t(n,!1,"button.print-button")}function getTopNavigationHeight(){var n=$("#header").height(),i=$(".alphabetical-navigation"),r,t;return i.length&&(n=n+i.height()),r=$("#content-search").is(".sticky"),t=$("#content-search-bar-and-filters-sticky-container"),r&&t.length&&(n=n+t.height()),n+20}function JumpToContentHandler(n){if(!n){n="content-of-page";var t=$(".content-of-page").attr("id");t&&(n=t)}this.jumpToElement=$("#"+n);this.jumpToContentLink=$("#jump-to-content-link");this.jumpToContentLink.attr("href","#"+n);this.initBinding=function(){this.jumpToContentLink.off("click").on("click",$.proxy(this.jumpToContentClickHandler,this));this.jumpToContentLink.off("keypress").on("keypress",$.proxy(this.jumpToContentKeyPressHandler,this))};this.jumpToContentKeyPressHandler=function(n){n.which===32&&(n.preventDefault(),n.stopImmediatePropagation(),$(n.target).click())};this.jumpToContentClickHandler=function(n){n.preventDefault();n.stopImmediatePropagation();accSmoothScrollToElement(this.jumpToElement)}}function togglePageScrollingIfNeeded(n,t){var i=$("body"),r=isNavVisible()||i.is(".modal-open"),u;n&&(r=!0);t&&(r=!1);r?i.css("position")!=="fixed"&&(togglePageScrollingIfNeeded.scrollTop=$(window).scrollTop(),u={overflow:"hidden",left:"0px",right:"0px",bottom:"0px",top:-togglePageScrollingIfNeeded.scrollTop+"px",position:"fixed"},detectIE()===11&&(u["z-index"]=1e3),i.css(u),i.scrollTop(0)):(i.removeAttr("style"),$(window).scrollTop(togglePageScrollingIfNeeded.scrollTop))}function restrictInputToDigits(n){return n.replace(/[^\d]/g,"")}function sendSessionStorageToOtherTabs(){var n={};Constants.SessionStorageSyncKeys.forEach(function(t){n[t]=store.session.get(t)});store.set(Constants.LocalStorage.SetSessionStorage,n);store.remove(Constants.LocalStorage.SetSessionStorage)}function requestSessionStorageFromOtherTabs(){requestSessionStorageFromOtherTabs.uuid=uuid();store.set(Constants.LocalStorage.GetSessionStorage,requestSessionStorageFromOtherTabs.uuid);store.remove(Constants.LocalStorage.GetSessionStorage)}const Constants={SearchType:{SearchService:"search_service",Dst:"dst"},Text:{NewTabLink:"(opens in a new tab)",Loading:"Loading, please wait",NoResultsForSelectedFilters:"We haven’t found any cards that match your selected filters",SamChatBarSearchInput:{Desktop:"Tell me your situation, for example: going through a break-up, always worried…",Mobile:"Example: Always worried"},SearchFor:"Search for",Clipboard:{LinkCopy:"Link copied to your clipboard."}},Device:{Desktop:"Desktop",Tablet:"Tablet",Mobile:"Mobile"},ScreenWidth:{Mobile:414,BigMobile:620,SmallTablet:640,Desktop:980,LargeDesktop:1600},StickyNavigationHeight:{Desktop:98,TabletAndMobile:52},KeyCode:{Space:32,Enter:13,Tab:9,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Escape:27},LocalStorage:{SurveyId:"survey_id",SurveyDismissDate:"survey_dismiss_date",SurveyActionDate:"survey_action_date",GetSessionStorage:"getSessionStorage",SetSessionStorage:"setSessionStorage",SavedCards:"savedCards",SavedCardsSeenModal:"savedCardsSeenModal",SavedCardsUseLocalStorage:"savedCardsUseLocalStorage"},SessionStorage:{CardCache:"cardCache",Feedback:"feedback-",SavedCards:"savedCards",SavedCardsSeenModal:"savedCardsSeenModal",FeedbackDismissed:"feedbackDismissed",CardsIsInGridView:"cardsIsInGridView"},Captcha:{Url:"/dmhgapi/Feedback/GetCaptchaQuestion"},AntiForgeryToken:{Header:"__RequestVerificationToken"}};Constants.SessionStorageSyncKeys=[Constants.SessionStorage.SavedCards,Constants.SessionStorage.SavedCardsSeenModal,Constants.SessionStorage.FeedbackDismissed,Constants.SessionStorage.CardsIsInGridView];var EmailFormHandlerGlobal=null;typeof dataLayer=="undefined"&&(dataLayer={push:function(){}});$(window).on("storage",function(n){var t,i;if(n.key===Constants.LocalStorage.GetSessionStorage)n.originalEvent.newValue&&n.originalEvent.newValue!=requestSessionStorageFromOtherTabs.uuid&&sendSessionStorageToOtherTabs();else if(n.key===Constants.LocalStorage.SetSessionStorage&&n.originalEvent.newValue){t=JSON.parse(n.originalEvent.newValue);for(i in t)store.session.set(i,t[i])}});$(document).on("click",".email-button",function(){var i=$(this),n,t;EmailFormHandlerGlobal=EmailFormHandler.init();n=$(this).data("searchModel");n?EmailFormHandlerGlobal.getJSONData=n.GetEmailData:(t=$(this).data("emailShareModel"),t?($("#content-card-modal").modal("hide"),i=$("#content-card-modal").data("element-to-focus-after-hide"),EmailFormHandlerGlobal.getJSONData=function(){return JSON.stringify(t)}):EmailFormHandlerGlobal.getJSONData=function(){return JSON.stringify({PageId:getPageId()})});EmailFormHandlerGlobal.show(i)});$(document).on("click",".print-button",function(){printIt(this)});$(document).on("click",".goUp",function(){return $("html, body").animate({scrollTop:0},1e3,"easeOutQuart",function(){$("#header > a").focus()}),!1});$(document).on("click",".youtube-video .play-video-button, .youtube-video .player, .youtube-video .close-video-button",function(n){if(n.preventDefault(),n.stopImmediatePropagation(),!$(this).is(".player")||isMobile()){var t=$(this).parents(".youtube-video"),r=t.parent(),e=t.find(".placeholder"),u=t.find(".player"),f=t.find(".play-video-button"),i=t.parents(".text-image-item-banner");i.length&&(r=i);i=t.parents(".homepage__video-area");i.length&&(r=i);r.addClass("youtube-video-parent");e.replaceWith(t.data("video-html"));setTimeout(function(){var n=$().add(t).add(r);if(t.off("animationend"),t.off("touchmove"),t.is(".open")){n.addClass("closing");t.on("animationend",function(){n.removeClass("open");n.removeClass("closing");t.find("iframe").replaceWith('<div class="placeholder"><\/div>')});accUntrapTabbing();$(".youtube-disable-tabbing-container").removeAttr("aria-hidden");u.attr("aria-hidden",!0);f.attr("aria-expanded",!1);f.focus()}else{n.addClass("open");t.on("touchmove",function(n){isMobile()&&n.preventDefault()},!1);u.attr("tabindex",-1).focus();isMobile()?accTrapTabbing(t):$(".youtube-disable-tabbing-container").attr("aria-hidden",!0);u.removeAttr("aria-hidden");f.attr("aria-expanded",!0)}},20)}});$(document).on("click",".youtube-video .view-transcript",function(n){n.preventDefault();n.stopImmediatePropagation();var i=$(this).parents(".youtube-video"),r=i.data("transcript-html"),t=window.open("about:blank");t.document.open();t.document.write(r);t.document.close()});$(document).ready(function(){var n=new JumpToContentHandler;n.initBinding()});accSetStickyHeaderHeightFunction(getTopNavigationHeight);requestSessionStorageFromOtherTabs();
(function(n){var r=null,u=null,f=null,e=null,i=null,t=null;n.getContentCardModal=function(){return r};n.getEmailModal=function(){return u};n.getFilterModal=function(){return f};n.getFeedbackModal=function(){return e};n.getSearchModal=function(){return i};$(document).ready(function(){r=$("#content-card-modal").remove();u=$("#email-modal").remove();f=$("#filter-modal").remove();e=$("#feedback-modal").remove();i=$("#search-modal").remove();var n=[r,u,f,e,i];n.forEach(function(n){var t=n.modal;n.modal=function(i,r){$("body").append(n);t.apply(n,[i,r])}})});$(document).on("hide.bs.modal",".modal",function(){t=null;togglePageScrollingIfNeeded(!1,!0)});$(document).on("hidden.bs.modal",".modal",function(){var n,t;accUntrapTabbing();n=$(this);setTimeout(function(){n.remove()},0);t=n.data("element-to-focus-after-hide");t&&accSmoothScrollToElement(t)});$(document).on("show.bs.modal",".modal",function(n){togglePageScrollingIfNeeded(!0,!1);$(this).data("element-to-focus-after-hide",n.relatedTarget);history.pushState(null,document.title,location.pathname)});$(document).on("shown.bs.modal",".modal",function(){accTrapTabbing($(this));t=$(this);setTimeout(function(){if(t&&!t.is(i)){var n=t.find(".modal-content");n.attr("tabindex",-1);n.focus();setTimeout(function(){n.removeAttr("tabindex")},500)}},500)});$(document).on("click",".modal-backdrop, .modal-dialog",function(n){n.target===this&&t&&t.modal("hide")});$(window).on("popstate",function(){isMobile()&&t?t&&t.modal("hide"):history.back()})})(window.Modals=window.Modals||{});
(function(n){var t=null,i=null,r=".social-bar";n.init=function(n){$(r).remove();var t=i.clone().appendTo($(n.desktopContainer)),u=i.clone().appendTo($(n.mobileContainer));t.addClass("desktop");u.addClass("mobile");SocialShareKit.init({title:"",text:"",onBeforeOpen:function(n,t,i){i.networkUrl=i.networkUrl.replace("%3A443","")}})};$(document).ready(function(){t=$("#social-bar-template");t.remove();i=t.children()})})(window.SocialBar=window.SocialBar||{});
$(function(){var s=24,e=500,h=function(){$(".header__menu-item--has-menu-panel.header__menu-item--type-desktop-level-1").on("click",function(t){var r=$(this).data("menu-item-id"),i;r&&(t.preventDefault(),t.stopImmediatePropagation(),i=$('.header__desktop-menu-panel[data-menu-item-id="'+r+'"]'),i.is(".header__desktop-menu-panel--show")?n():(n(),i.addClass("header__desktop-menu-panel--show"),$(this).attr("aria-expanded",!0)))})},c=function(n){var t=$(n).find(".header__desktop-menu-inner-panel--show");return t.length!==0},l=function(){$(".header__menu-item--type-desktop-level-3").off("keydown").on("keydown",function(n){var t=$(".header__desktop-menu-inner-panel-menu-item-list").find(".header__menu-item--type-desktop-level-3:last"),i=jQuery.inArray(this,t)!==-1,r=n.keyCode||n.which;r===Constants.KeyCode.Tab&&!n.shiftKey&&i&&(n.preventDefault(),n.stopImmediatePropagation(),$(this).closest(".header__desktop-menu-panel").find(".header__related-content-item-list").find(".feature-box__button:first").focus())})},a=function(){$(".header__related-content--type-desktop").find(".header__related-content-item-list").find(".feature-box__button").off("keydown").on("keydown",function(t){var r=$(this).closest(".header__desktop-menu-panel"),f=r.find(".header__desktop-menu-inner-panel--show").closest(".header__desktop-menu-panel-menu-item"),s=f.find(".header__menu-item--type-desktop-level-2"),h=r.find(".header__desktop-menu-inner-panel--show").find(".header__menu-item--type-desktop-level-3:last"),l=r.find(".header__menu-item--type-desktop-level-2:last"),e=s.is(l),u=c(r),a=$(this).closest(".header__related-content-item-list").find(".feature-box__button:first"),v=$(this).is(a),y=$(this).closest(".header__related-content-item-list").find(".feature-box__button:last"),o=$(this).is(y),p=t.keyCode||t.which;p===Constants.KeyCode.Tab&&(!t.shiftKey&&o&&!e&&u?(t.preventDefault(),t.stopImmediatePropagation(),i(),f.next().find(".header__menu-item--type-desktop-level-2").focus()):!t.shiftKey&&o&&(!u||u&&e)?n():t.shiftKey&&v&&u&&(t.preventDefault(),t.stopImmediatePropagation(),h.focus()))})},v=function(){$(".header__menu-item--type-desktop-level-2").on("click",function(n){var r=$(this).data("menu-item-id"),t,u;r&&(n.preventDefault(),n.stopImmediatePropagation(),t=$('.header__desktop-menu-inner-panel[data-menu-item-id="'+r+'"]'),t.is(".header__desktop-menu-inner-panel--show")?i():(i(),t.addClass("header__desktop-menu-inner-panel--show"),$(this).attr("aria-expanded",!0),u=$(this).parents(".header__desktop-menu-panel").children(".header__desktop-menu-panel-spacer"),u.width(t.width()+s)))})},y=function(){$(window).on("click",function(t){var i=$(t.target);i.parents(".header__secondary-area-menu-item").length||n()})},p=function(){$(".header__moblet-menu-panel-back-button[data-menu-item-id]").on("click",function(n){n.preventDefault();n.stopImmediatePropagation();var i=$(this).data("menu-item-id"),f=$('.header__moblet-menu-panel[data-menu-item-id="'+i+'"]');t(!0,!1);u(f,!0,!1);i||r(!0)})},w=function(){$(".header__menu-item--type-moblet[data-menu-item-id]").on("click",function(n){var i,r,f;n.preventDefault();n.stopImmediatePropagation();i=$(this).data("menu-item-id");r=$('.header__moblet-menu-panel[data-menu-item-id="'+i+'"]');t(!1,!0);u(r,!1,!0);$(this).is(".header__menu-item--type-moblet-level-1")&&(f=$('.header__related-content--type-moblet[data-menu-item-id="'+i+'"]'),f.addClass("header__related-content--show").addClass("header__related-content--show-moblet-forward"))})},b=function(){$(".header__moblet-menu-open-button").on("click",function(n){n.preventDefault();n.stopImmediatePropagation();ot()})},k=function(){$(".header__tablet-menu-close-button").on("click",function(n){n.preventDefault();n.stopImmediatePropagation();f()})},d=function(){$(".header__mobile-menu-top-close-button").on("click",function(n){n.preventDefault();n.stopImmediatePropagation();f()})},g=function(){$(".header__special-link--search-mobile").on("click",function(n){n.preventDefault();n.stopImmediatePropagation();r(!1);$(".header__mobile-search-panel").is(".header__mobile-search-panel--show")?(t(!1,!1),u($('.header__moblet-menu-panel[data-menu-item-id=""]'),!1,!1)):(t(!1,!1),$(".header__mobile-search-panel").addClass("header__mobile-search-panel--show"),$(this).attr("aria-expanded",!0))})},nt=function(){$(".header__mobile-search-panel-input").on("change keyup keydown",function(){var n=$(this).val();n.length>0?$(".header__mobile-search-panel-clear-button").addClass("header__mobile-search-panel-clear-button--show"):$(".header__mobile-search-panel-clear-button").removeClass("header__mobile-search-panel-clear-button--show")});$(".header__mobile-search-panel-input").on("keydown",function(n){n.keyCode===Constants.KeyCode.Enter&&(n.stopPropagation(),n.preventDefault(),$(".header__mobile-search-panel-submit-button").click())});$(".header__mobile-search-panel-clear-button").on("click",function(n){n.preventDefault();n.stopImmediatePropagation();$(".header__mobile-search-panel-input").val("").focus();$(".header__mobile-search-panel-clear-button").removeClass("header__mobile-search-panel-clear-button--show")});$(".header__mobile-search-panel-submit-button").on("click",function(n){n.preventDefault();n.stopImmediatePropagation();$(".header__desktop-tablet-search-panel-input").val().length<1?(store.session.remove(Constants.SessionStorage.CardCache),window.location="/search-resources"):window.location="/search-resources?search="+$(".header__mobile-search-panel-input").val()})},tt=function(){$(".header__special-link--search-desktop-tablet").on("click",function(t){t.preventDefault();t.stopImmediatePropagation();var i=$("#search-bar-search-input");if(i.length){i.focus();return}f();$(".header__desktop-tablet-search-panel").is(".header__desktop-tablet-search-panel--show")?n():(n(),$(".header__desktop-tablet-search-panel").addClass("header__desktop-tablet-search-panel--show"),$(this).attr("aria-expanded",!0))})},it=function(){$(".header__desktop-tablet-search-panel-input").on("change keyup keydown",function(){var n=$(this).val();n.length>0?$(".header__desktop-tablet-search-panel-clear-button").addClass("header__desktop-tablet-search-panel-clear-button--show"):$(".header__desktop-tablet-search-panel-clear-button").removeClass("header__desktop-tablet-search-panel-clear-button--show")});$(".header__desktop-tablet-search-panel-input").on("keydown",function(n){n.keyCode===Constants.KeyCode.Enter&&(n.stopPropagation(),n.preventDefault(),$(".header__desktop-tablet-search-panel-submit-button").click())});$(".header__desktop-tablet-search-panel-clear-button").on("click",function(n){n.preventDefault();n.stopImmediatePropagation();$(".header__desktop-tablet-search-panel-input").val("").focus();$(".header__desktop-tablet-search-panel-clear-button").removeClass("header__desktop-tablet-search-panel-clear-button--show")});$(".header__desktop-tablet-search-panel-submit-button").on("click",function(n){n.preventDefault();n.stopImmediatePropagation();$(".header__desktop-tablet-search-panel-input").val().length<1?(store.session.remove(Constants.SessionStorage.CardCache),window.location="/search-resources"):window.location="/search-resources?search="+$(".header__desktop-tablet-search-panel-input").val()})},rt=function(){$(".header__crisis-area-arrow-button").on("click",function(n){n.preventDefault();n.stopImmediatePropagation();var r=$(this).is(".header__crisis-area-arrow-button--next"),t=$(".header__crisis-area-alert:not(.header__crisis-area-alert--hidden)"),i=r?t.is(":last-child")?t.parent().children().first():t.next():t.is(":first-child")?t.parent().children().last():t.prev();t.addClass("header__crisis-area-alert--hidden");i.removeClass("header__crisis-area-alert--hidden");$(".header__crisis-area-current-alert-num").text(i.index()+1)})},ut=function(){$(".header__crisis-area-close-button").on("click",function(n){n.preventDefault();n.stopImmediatePropagation();$(".header__crisis-area").addClass("header__crisis-area--hidden");sessionStorage.setItem("crisisAreaDismissed",!0);o()})},o=function(){!$(".header__crisis-area").length||$(".header__crisis-area").is(".header__crisis-area--hidden")?($(".header__moblet-menu").addClass("header__moblet-menu--no-crisis-area"),$(".header__moblet-menu-content").addClass("header__moblet-menu-content--no-crisis-area")):$("#header").addClass("show-survey")},ft=function(){var t=$(".header"),i=$("#content-search-bar-and-filters-container"),r=$(".alphabetical-navigation"),n;n=function(){i.attr("style","top: "+t.height()+"px;");r.attr("style","top: "+t.height()+"px;");requestAnimationFrame(n)};n()},et=function(){var t=$(".header"),i=$(".header-spacer"),n;n=function(){i.height(t.height());requestAnimationFrame(n)};n()},n=function(){$(".header__desktop-menu-panel").removeClass("header__desktop-menu-panel--show");$(".header__menu-item--type-desktop-level-1").attr("aria-expanded",!1);$(".header__desktop-tablet-search-panel").removeClass("header__desktop-tablet-search-panel--show");$(".header__special-link--search-desktop-tablet").attr("aria-expanded",!1);i()},i=function(){var n,t;$(".header__desktop-menu-inner-panel").removeClass("header__desktop-menu-inner-panel--show");$(".header__menu-item--type-desktop-level-2").attr("aria-expanded",!1);n=0;$(".header__secondary-area-menu-item--type-desktop").each(function(){n+=$(this).width()});t=616;$(".header__desktop-menu-panel-spacer").width(n-t)},ot=function(){n();$(".header__moblet-menu").addClass("header__moblet-menu--open");$(".header__moblet-menu-open-button").addClass("header__moblet-menu-open-button--open");$(".header__tablet-menu-close-button").addClass("header__tablet-menu-close-button--open");t();r();u($('.header__moblet-menu-panel[data-menu-item-id=""]'),!1,!1);scrollLock.disablePageScroll($(".header__moblet-menu-content")[0]);setTimeout(function(){accTrapTabbing($(".header__moblet-menu, .header__special-link--desktop-tablet"))},100)},f=function(){$(".header__moblet-menu").addClass("header__moblet-menu--closing");$(".header__moblet-menu-open-button").removeClass("header__moblet-menu-open-button--open");$(".header__tablet-menu-close-button").removeClass("header__tablet-menu-close-button--open");setTimeout(function(){$(".header__moblet-menu").removeClass("header__moblet-menu--closing").removeClass("header__moblet-menu--open")},300);r(!1);scrollLock.enablePageScroll($(".header__moblet-menu-content")[0]);setTimeout(function(){accUntrapTabbing()},100)},t=function(n,t){(n||t)&&(n&&$(".header__moblet-menu-panel--show").addClass("header__moblet-menu-panel--hide").addClass("header__moblet-menu-panel--hide-backward"),t&&$(".header__moblet-menu-panel--show").addClass("header__moblet-menu-panel--hide").addClass("header__moblet-menu-panel--hide-forward"),setTimeout(function(){$(".header__moblet-menu-panel--hide").removeClass("header__moblet-menu-panel--hide").removeClass("header__moblet-menu-panel--hide-forward").removeClass("header__moblet-menu-panel--hide-backward")},e));$(".header__moblet-menu-panel").removeClass("header__moblet-menu-panel--show").removeClass("header__moblet-menu-panel--show-forward").removeClass("header__moblet-menu-panel--show-backward");$(".header__mobile-search-panel").removeClass("header__mobile-search-panel--show");$(".header__special-link--search-mobile").attr("aria-expanded",!1)},r=function(n){n&&($(".header__related-content--show").addClass("header__related-content--hide").addClass("header__related-content--hide-moblet-backward"),setTimeout(function(){$(".header__related-content--hide").removeClass("header__related-content--hide").removeClass("header__related-content--hide-moblet-backward")},e));$(".header__related-content--show").removeClass("header__related-content--show").removeClass("header__related-content--show-moblet-forward")},u=function(n,t,i){n.addClass("header__moblet-menu-panel--show");t||i?(t&&n.addClass("header__moblet-menu-panel--show-backward"),i&&n.addClass("header__moblet-menu-panel--show-forward"),n.data("menu-item-id")!==""&&($(".header__moblet-menu-panel--hide").data("menu-item-id")===""?($(".header__moblet-menu-content-spacer").css("transition","none").height(n.height()),setTimeout(function(){$(".header__moblet-menu-content-spacer").css("transition","")},100)):$(".header__moblet-menu-content-spacer").height(n.height()))):($(".header__moblet-menu-content-spacer").css("transition","none").height(n.height()),setTimeout(function(){$(".header__moblet-menu-content-spacer").css("transition","")},100))};$(document).ready(function(){h();v();y();l();a();p();w();b();k();d();g();nt();tt();it();rt();ut();o();FeedbackTab.show();ft()});et()});
function CaptchaHandler(n){this._sourceUrl=n;this.load=function(n){$.get({url:this._sourceUrl,contentType:"application/json; charset=utf-8",success:function(t){var i=t!=null?t.question:"";n(i)},error:function(t){console.log(t);n("")}})}};
function AntiForgeryToken(){this.load=function(n){$.ajax({url:"/dmhgapi/Feedback/GetAntiForgeryToken",method:"POST"}).done(function(t){n(t.token)})}};
function EmailFormHandler(n){var t=Modals.getEmailModal();this.emailForm=t.find("#email-form");this.captchaInput=t.find("#email-form-captcha-input");this.emailInput=t.find("#email-form-email-address-input");this.submitButton=t.find("#email-form-submit-button");this.antiForgeryInput=t.find("#email-form-antiforgery-token-input");this.captchaQuestionTextElement=t.find("#email-form-captcha-question");this.exampleElement=t.find(".example");this.messageContainer=t.find(".message-container");this.messageTextElement=t.find(".message-text");this.getJSONData=n;this.captchaHandler=new CaptchaHandler(Constants.Captcha.Url);this.antiForgeryToken=new AntiForgeryToken}EmailFormHandler.prototype.initBinding=function(){this.submitButton.off("click").on("click",$.proxy(this.submitClickHandler,this));this.emailInput.off("focus").on("focus",$.proxy(this.hideEmailError,this));this.captchaInput.off("focus").on("focus",$.proxy(this.hideEmailError,this));this.captchaHandler.load($.proxy(this.displayNewQuestion,this));this.antiForgeryToken.load($.proxy(this.getAntiforgeryToken,this));Modals.getEmailModal().off("hidden.bs.modal").on("hidden.bs.modal",$.proxy(this.resetEmailForm,this))};EmailFormHandler.prototype.show=function(n){Modals.getEmailModal().modal("show",n)};EmailFormHandler.prototype.resultHandler=function(n){n.isValid?this.sendEmail(this.getJSONData()):(this.showEmailError("Incorrect answer. Please enter new Captcha code.",!0),this.displayNewQuestion(n.question))};EmailFormHandler.prototype.getAntiforgeryToken=function(n){this.antiForgeryInput.val(n)};EmailFormHandler.prototype.displayNewQuestion=function(n){this.captchaInput.val("");this.captchaQuestionTextElement.text(n);this.emailForm.addClass("loaded")};EmailFormHandler.prototype.submitClickHandler=function(n){n.preventDefault();this.hideEmailError();var t=this.validateEmailForm();return t&&this.sendEmail(this.getJSONData(),this.captchaInput.val()),!1};EmailFormHandler.prototype.validateEmail=function(n){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|('.+'))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)};EmailFormHandler.prototype.validateEmailForm=function(){var n=this.emailInput.val();if(n&&n!==""){if(n&&n!==""&&!this.validateEmail(n))return this.showEmailError("Invalid email address. Please check address to continue.",!1),!1;if(this.captchaInput.val()==="")return this.showEmailError("Please fill in a correct captcha answer.",!0),!1}else return this.showEmailError("Email address missing. Please enter address to continue.",!1),!1;return!0};EmailFormHandler.prototype.sendEmail=function(n,t){var r=this.validateEmailForm(),u=this.emailInput.val(),i={};i[Constants.AntiForgeryToken.Header]=this.antiForgeryInput.val();this.submitButton.removeClass("stopped");r&&$.ajax({url:this.emailForm.attr("action"),type:this.emailForm.attr("method"),headers:i,data:'{ "data":'+n+', "captchaAnswer": "'+t+'", "toAddress": "'+u+'"}',dataType:"json",contentType:"application/json; charset=utf-8"}).done($.proxy(function(n){this.submitButton.addClass("stopped");n.EmailSent?(this.showEmailSent(),this.captchaHandler.load($.proxy(this.displayNewQuestion,this))):n.Message!==""?this.showEmailError(n.Message,!0):n.Question!==""&&(this.showEmailError("Incorrect answer. Please enter new Captcha code.",!0),this.displayNewQuestion(n.Question))},this))};EmailFormHandler.prototype.showEmailSent=function(){var n="Email has been sent.";this.exampleElement.addClass("hidden");this.messageContainer.removeClass("error closed").addClass("valid");this.messageTextElement.text(n).attr("aria-label",n)};EmailFormHandler.prototype.showEmailError=function(n,t){t?(this.captchaInput.addClass("error"),this.emailInput.removeClass("error")):(this.emailInput.addClass("error"),this.captchaInput.removeClass("error"));this.exampleElement.removeClass("hidden");this.messageContainer.removeClass("valid closed").addClass("error");this.messageTextElement.text(n).attr("aria-label",n);this.messageContainer.focus()};EmailFormHandler.prototype.hideEmailError=function(){this.captchaInput.removeClass("error");this.emailInput.removeClass("error");this.messageContainer.addClass("closed");var n=this;setTimeout(function(){n.messageContainer.is(".closed")&&n.messageTextElement.text("")},500)};EmailFormHandler.prototype.resetEmailForm=function(){this.hideEmailError();this.emailForm.find("input[type=text], textarea").val("")};EmailFormHandler.init=function(n){var t=new EmailFormHandler(n);return t.initBinding(),t};
(function(n){function t(n){var t=575,i=400,r=document.documentElement.clientWidth/2-t/2,u=(document.documentElement.clientHeight-i)/2,f="status=1,resizable=yes,width="+t+",height="+i+",top="+u+",left="+r,e=window.open(n,"",f);e.focus()}function i(t,i){n.showModalForCard(t,null,null,i);Modals.getContentCardModal().addClass("saved-card")}n.showModalForCard=function(i,r,u,f){var e=Modals.getContentCardModal(),h,d,g,ct,a;r&&(e=e.clone(!0,!0));var ai=e.find(".modal-content"),vi=e.find(".modal-body"),nt=e.find(".preview-image"),tt=nt.find("img"),v=e.find(".logo"),it=v.find(".sr-only"),rt=v.find(".icon-h2h-logo"),lt=e.find(".title"),at=e.find(".description"),w=e.find(".time"),vt=w.find(".value"),b=e.find(".price"),yt=b.find(".value"),k=e.find(".therapist-guided"),ut=e.find(".buttons"),s=e.find(".action-button"),pt=s.find(".text"),wt=s.find(".text-sr"),ft=s.find(".icon"),c=e.find(".phone-link"),bt=c.find(".text"),kt=c.find(".text-sr"),l=e.find(".sharing-button"),et=e.find(".sharing-content"),dt=e.find(".close-sharing-button"),gt=e.find(".facebook-share-button"),ni=e.find(".twitter-share-button"),ti=e.find(".linkedin-share-button"),ii=e.find(".email-button"),ri=e.find(".page-view-link"),ui=e.find(".save-button"),fi=e.find(".saved-card"),ei=fi.find(".saved-card-button"),ot=e.find(".saved-cards-clear"),oi=ot.find(".saved-cards-clear-yes-button"),si=ot.find(".saved-cards-clear-no-button"),y=e.find(".saved-cards-link"),hi=y.find("input"),st=y.find(".saved-cards-link-copy-button"),ci=y.find(".saved-cards-link-done-button"),p=y.find(".saved-cards-link-copied-text"),li=$(".actions-container.saved-cards-listener > button");if(i&&i.data("modal")){var o=i.data("modal"),yi=i.data("page"),ht=o.TemplateName==="InternalContentCard";nt.toggleClass("without-frame",!!o.DisableWhiteBorderOnModalImage);tt.attr("src",o.ModalImage);tt.attr("alt"," ");o.ResourceProviderLogo?(v.attr("style","background-image: url("+o.ResourceProviderLogo+")"),it.text(o.ResourceProvider),rt.hide()):(v.removeAttr("style"),it.text("Head to Health"),rt.show());lt.html(o.Title);at.html(o.Description);o.Price?(b.show(),yt.text(o.Price)):b.hide();o.Time?(w.show(),vt.text(o.Time)):w.hide();h=o.ExtraFeatures.filter(function(n){return n.FeatureName==="TherapistGuided"});h=h.length?h[0]:null;h?(k.text(h.FeatureData),k.show()):k.hide();s.attr("href",o.ActionUrl);s.attr("target",o.ActionTarget);s.off("click").on("click",function(){o.ActionTarget.toLowerCase()!=="_blank"&&e.modal("hide")});(o.ActionText===""||o.ActionText===null)&&(o.ActionText=ht?"Go to page":"Go to website");pt.text(o.ActionText);d=o.ActionText+" "+o.Title;o.ActionTarget!==null&&o.ActionTarget.toLowerCase()==="_blank"&&(d+=" "+Constants.Text.NewTabLink);wt.text(d.trim());ht?ft.addClass("hide"):ft.removeClass("hide");o.ContactDetails?(bt.text(o.ContactDetails),g=o.ContactDetails.replace(/\D/g,""),kt.text("Phone number "+g.split("").join(" ")),c.attr("href","tel://"+g),c.show(),ut.removeClass("no-phone")):(c.hide(),ut.addClass("no-phone"));l.off("click").on("click",function(){$(this).toggleClass("active");$(this).is(".active")&&et.focus()});l.removeClass("active");et.off("keydown").on("keydown",function(n){n.keyCode===Constants.KeyCode.Escape&&(n.stopPropagation(),n.preventDefault(),l.removeClass("active"),l.focus())});dt.off("click").on("click",function(){l.removeClass("active")});ct=location.pathname==="/"?location.href.replace(/\/$/,""):location.href.replace(location.pathname,"");a=ct+o.ModalPageUrl;gt.off("click").on("click",function(){var n="https://www.facebook.com/sharer/sharer.php?u=";n+=encodeURIComponent(a);n+="&text="+encodeURIComponent(o.Title);t(n)});ni.off("click").on("click",function(){var n="https://twitter.com/intent/tweet?url=";n+=encodeURIComponent(a);n+="&text="+encodeURIComponent(o.Title);t(n)});ti.off("click").on("click",function(){var n="https://www.linkedin.com/shareArticle?mini=true&source=Head%20to%20Health&url=";n+=encodeURIComponent(a);n+="&summary="+encodeURIComponent(o.Title);t(n)});ri.attr("href",a);ii.data("emailShareModel",{CardListEmailInfo:{CardList:[o.ItemId],Filters:[],Keywords:null,IsSavedCards:null,IsSingleCard:!0}});n.addSaveButtonToCard(i,ui,e)}e.off("shown.bs.modal").on("shown.bs.modal",function(){$(this).data("element-to-focus-after-hide",f||i)});e.removeClass("saved-card");e.removeClass("saved-cards-clear");e.removeClass("saved-cards-link");e.removeClass("saved-cards-link-loading");ei.off("click").on("click",function(){e.modal("hide")});si.off("click").on("click",function(){e.modal("hide")});oi.off("click").on("click",function(){u&&u.apply(e);e.modal("hide");window.scrollTo({top:0,left:0,behavior:"smooth"});$(".image-left > div").focus()});st.off("click").on("click",function(n){n.preventDefault();copyToClipboard(hi);p.empty();setTimeout(function(){st.focus();setTimeout(function(){p.text(Constants.Text.Clipboard.LinkCopy).attr("tabindex","0");setTimeout(function(){p.focus()},100)},100)},100)});ci.off("click").on("click",function(){e.modal("hide");li.focus()});r?(e.removeClass("modal"),e.removeClass("fade"),e.insertBefore(r)):(e.modal("show",i),setTimeout(function(){p.text("")},1))};n.showSavedCardsClearModal=function(t,i){n.showModalForCard(t,null,i);Modals.getContentCardModal().addClass("saved-cards-clear")};n.showSavedCardsLinkModal=function(t,i){n.showModalForCard(t,null,i);Modals.getContentCardModal().addClass("saved-cards-link-loading");$.ajax({url:"/dmhgapi/SavedCard/SaveCards",method:"POST",dataType:"json",data:JSON.stringify({CardIdList:n.getSavedCards()}),contentType:"application/json; charset=utf-8"}).done(function(n){var i,t;Modals.getContentCardModal().removeClass("saved-cards-link-loading");Modals.getContentCardModal().addClass("saved-cards-link");i=Modals.getContentCardModal().find(".saved-cards-link input");i.val(window.location.origin+"/share-resources/"+n.SetId);t=Modals.getContentCardModal().find(".modal-content");t.attr("tabindex",-1);t.focus();setTimeout(function(){t.removeAttr("tabindex")},500)})};n.updateSavedCardsElements=function(t){t||(t=n.getSavedCards());$("#saved-resources-link,#saved-resources-link-mobile").attr("data-count",t.length);$("#saved-resources-count, #saved-resources-count-mobile").attr("data-count",t.length).text(t.length);$("#moblet-show-nav-button").attr("data-saved-resources-count",t.length);$(".saved-cards-listener").trigger("saved-cards-updated",[t])};n.getSavedCards=function(){var t=n.getShouldKeepSavedCardsForever()?store.get(Constants.LocalStorage.SavedCards,[]):store.session.get(Constants.SessionStorage.SavedCards,[]);return t instanceof Array||(t=[]),t};n.haveSavedCards=function(){return n.getSavedCards().length>0};n.putSavedCards=function(t,i){store.set(Constants.LocalStorage.SavedCards,t);store.session.set(Constants.SessionStorage.SavedCards,t);i||sendSessionStorageToOtherTabs();n.updateSavedCardsElements(t)};n.addSavedCard=function(t){var i=n.getSavedCards().filter(function(n){return n!==t});i.push(t);n.putSavedCards(i)};n.removeSavedCard=function(t){n.putSavedCards(n.getSavedCards().filter(function(n){return n!==t}))};n.isSavedCard=function(t){return n.getSavedCards().some(function(n){return n===t})};n.getSeenSavedCardsModal=function(){return n.getShouldKeepSavedCardsForever()?store.get(Constants.SessionStorage.SavedCardsSeenModal):store.session.get(Constants.SessionStorage.SavedCardsSeenModal)};n.setSeenSavedCardsModal=function(n){store.set(Constants.SessionStorage.SavedCardsSeenModal,n);store.session.set(Constants.SessionStorage.SavedCardsSeenModal,n)};n.getShouldKeepSavedCardsForever=function(){return store.get(Constants.LocalStorage.SavedCardsUseLocalStorage)};n.setShouldKeepSavedCardsForever=function(n){store.set(Constants.LocalStorage.SavedCardsUseLocalStorage,n);n?(store.set(Constants.LocalStorage.SavedCards,store.session.get(Constants.SessionStorage.SavedCards)),store.set(Constants.LocalStorage.SavedCardsSeenModal,store.session.get(Constants.SessionStorage.SavedCardsSeenModal))):(store.session.set(Constants.SessionStorage.SavedCards,store.get(Constants.LocalStorage.SavedCards)),store.session.set(Constants.SessionStorage.SavedCardsSeenModal,store.get(Constants.LocalStorage.SavedCardsSeenModal)),store.remove(Constants.LocalStorage.SavedCards),store.remove(Constants.LocalStorage.SavedCardsSeenModal))};n.applyTitleHeightClassesToCard=function(n){var r=47,u=71,f=95,e=$(n).find("div.title-and-info").children().first().clone().appendTo($("body")),i=e.height(),t,o;e.remove();t=$(n).find("div.title-and-info").children().last().clone().appendTo($("body"));o=t.height();t.remove();i>f?t.addClass("info-with-more-than-three-title-lines"):i>u&&i<f?t.addClass("info-with-three-title-lines"):i>r&&i<u?t.addClass("info-with-two-title-lines"):i>23&&i<r?t.addClass("info-with-one-title-line"):t.addClass("info-with-no-title-line")};n.addSaveButtonToCard=function(t,r,u){function s(){r.toggleClass("saved",f)}var o=t.data("modal"),e=o.uuid||o.ItemId,h=o.Title,f=n.isSavedCard(e);r||(r=$("<button />").insertAfter(t.children(".action-button")),r.attr("type","button"),r.addClass("save-button"));r.addClass("saved-cards-listener");r.empty();r.append('<span class="unsaved"><span class="sr-only">'+h+" resource is not saved, select to save resource<\/span><\/span>");r.append('<span class="saved"><span class="sr-only">'+h+" resource is saved, select to unsave resource<\/span><\/span>");s();r.off("click").on("click",function(o,h){o.preventDefault();o.stopPropagation();f?(n.removeSavedCard(e),f=!1):(n.addSavedCard(e),f=!0);s();n.getSeenSavedCardsModal()?h||(r.blur(),r.focus()):(n.setSeenSavedCardsModal(!0),sendSessionStorageToOtherTabs(),u&&(h=u.data("element-to-focus-after-hide")),i(t,h||r))});r.off("saved-cards-updated").on("saved-cards-updated",function(n,t){f=t.some(function(n){return n===e});s()})};n.afterRenderHandler=function(t,i,r,u){isTabletOrMobile()&&(u=!0);t.filter(function(n){return n.nodeType===1}).forEach(function(t){var f=$(t);n.applyTitleHeightClassesToCard(f);n.addSaveButtonToCard(f);setTimeout(function(){f.addClass("appear-animation");r&&f.addClass("no-animation");i!==0||u||setTimeout(function(){f.focus()},300)},i>0&&!r?i*100:0)})};$(document).on("click","*",function(n){$(n.target).closest("#content-card-sharing-content").length||$(n.target).closest("#content-card-sharing-button").length||$("#content-card-sharing-button").removeClass("active")});$(document).on("click",".content-card,.content-card > .action-button,.content-card > .title-and-info,.hcl__card",function(t){if(t.stopPropagation(),!$(this).is(".title-and-info")||isTabletOrMobile()){var i=$(this).closest(".content-card, .hcl__card");i.is(".no-result-card")||i.is(".no-result-content-card")||i.is(".spinner-content-card")||n.showModalForCard(i)}});$(window).on("storage",function(t){t.key===Constants.LocalStorage.SetSessionStorage&&n.putSavedCards(n.getSavedCards(),!0)});$(window).on("pageshow",function(t){t.originalEvent.persisted&&n.updateSavedCardsElements()});$(document).ready(function(){n.updateSavedCardsElements()})})(window.ContentCards=window.ContentCards||{});
(function(n){function r(){i();store.set(Constants.LocalStorage.SurveyId,t);store.set(Constants.LocalStorage.SurveyDismissDate,moment().valueOf());$("#header").removeClass("show-survey")}function u(){i();store.set(Constants.LocalStorage.SurveyId,t);store.set(Constants.LocalStorage.SurveyActionDate,moment().valueOf());$("#header").removeClass("show-survey")}function i(){store.remove(Constants.LocalStorage.SurveyId);store.remove(Constants.LocalStorage.SurveyDismissDate);store.remove(Constants.LocalStorage.SurveyActionDate)}var t=null;n.displayBanner=function(n,i,r,u){var s=!0,h;t=n;var o=null,f=null,e=null;o=store.get(Constants.LocalStorage.SurveyId);f=moment(store.get(Constants.LocalStorage.SurveyDismissDate));f.isValid()||(f=null);e=moment(store.get(Constants.LocalStorage.SurveyActionDate));e.isValid()||(e=null);o&&o!=="null"&&o!=="undefined"&&o===t&&(u?f&&f!=="null"&&f!=="undefined"&&(s=!1,(i>0||r>0)&&(h=f.clone(),h.add(r,"days"),h.add(i,"hours"),moment(Date.now())>h&&(s=!0))):e&&e!=="null"&&e!=="undefined"&&(s=!1));s&&$("#header").addClass("show-survey")};$(document).on("click","#survey-banner-close-button",function(){r();$("#nav-alert-div").attr("role","alert");$("#nav-alert-div").append("<span>Survey notice has been dismissed<\/span>")});$(document).on("click",'#survey-banner-link, .promo-card[data-type^="Survey"] a',function(){u()})})(window.SurveyPromo=window.SurveyPromo||{});
(function(n){function p(){store.session.set(Constants.SessionStorage.FeedbackDismissed,!0);sendSessionStorageToOtherTabs()}function w(){p();$("#header").removeClass("show-feedback")}function b(){return Modals.getFeedbackModal().is(".animating")}function s(n){b()||(Modals.getFeedbackModal().addClass("animating"),setTimeout(function(){Modals.getFeedbackModal().removeClass("animating")},500));setTimeout(n,30)}function f(n){var i=n||t;return Modals.getFeedbackModal().find(".feedback-modal-num-questions.feedback-type-"+i).val()*1}function h(){return Modals.getFeedbackModal().find("#feedback-modal-form").attr("data-question")*1}function c(n){t=n===1?"unselected":Modals.getFeedbackModal().find(".feedback-modal-feedback-type:checked").val();Modals.getFeedbackModal().attr("data-feedback-type",t);var r=f(),u=Modals.getFeedbackModal().find("#feedback-modal-form");u.attr("data-question",n);u.attr("data-question-from-end",r-n+2);Modals.getFeedbackModal().find(".feedback-modal-step-number").text(n-1);Modals.getFeedbackModal().find(".feedback-modal-step-count").text(r);setTimeout(function(){var i=$(Modals.getFeedbackModal().find(".question.feedback-type-"+t).get(n-2)),r;i.length&&(r=i[0].scrollHeight>i.height(),Modals.getFeedbackModal().find(".navigation").toggleClass("shadow",r),i.toggleClass("too-tall",r))},500);i("")}function l(n){s(function(){c(h()+n);y()})}function a(){var t=h(),i=Modals.getFeedbackModal().find(".question").eq(t-1),n=!0;return i.find(".validatable").each(function(){n&=$(this).triggerHandler("validate")}),n}function k(n){var t,s,o,h;Modals.getFeedbackModal().find("input").not(".feedback-modal-feedback-type").prop("checked",!1);Modals.getFeedbackModal().find('input[type="text"], textarea').val("");Modals.getFeedbackModal().find("textarea").each(function(){var n=$(this).next(),t=n.attr("data-limit"),r;n.empty();r=new CharacterLimitHandler(t,$(this),n,null);r.init();$(this).off("validate").on("validate",function(){var n=!$(this).is(".invalid");return n?i(""):i("Your response must not exceed "+t+' characters. <span class="sr-only">You currently have '+currentCount+" characters.<\/span>"),n})});Modals.getFeedbackModal().find(".textarea-option").each(function(){var n=$(this).parent().next();$(this).off("change").on("change",function(){$(this).is(":checked")?(n.removeClass("disabled"),n.find("textarea").prop("disabled",!1)):(n.addClass("disabled"),n.find("textarea").prop("disabled",!0))}).triggerHandler("change")});u(r.Questions);c(1);e&&(t=Modals.getFeedbackModal().find(".feedback-modal-feedback-type-site-label"),s=" ("+f("site")+" questions)",t.append(s),t.attr("aria-label",t.text()+". Complete at least one question"),o=Modals.getFeedbackModal().find(".feedback-modal-feedback-type-page-label"),h=" ("+f("page")+" questions)",o.append(h),o.attr("aria-label",o.text()+". Complete at least one question"),e=!1);v();d();n&&Modals.getFeedbackModal().data("element-to-focus-after-hide",n)}function i(n){var t=Modals.getFeedbackModal().find("#feedback-modal-error"),i=Modals.getFeedbackModal().find(".sr-feedback-modal-error");n.length>=1?(t.html(n),i.html(n)):(t.html(n),i.html(n))}function v(n){function t(n){Modals.getFeedbackModal().find(".feedback-modal-captcha-question").text(n);Modals.getFeedbackModal().find(".feedback-modal-captcha").val("")}if(n)t(n);else{var i=new CaptchaHandler(Constants.Captcha.Url);i.load(t)}}function d(){var n=new AntiForgeryToken;n.load(function(n){o=n})}function y(){Modals.getFeedbackModal().find("#feedback-modal-focus-point").focus()}function u(n,t){function i(){var t=Modals.getFeedbackModal().find("#feedback-modal-form");t.attr("data-state",n);y()}t?s(i):i()}const r={Questions:"questions",Loading:"loading",Finished:"finished"};var e=!0,o=null,t=null;n.show=function(){store.session.get(Constants.SessionStorage.FeedbackDismissed)||$("#header").addClass("show-feedback")};$(document).on("click",".feedback-tab-close-button",function(){w();$("#nav-alert-div").attr("role","alert").append("<span>Feedback bar has been dismissed<\/span>")});$(document).on("click",".feedback-tab-open-button",function(){Modals.getFeedbackModal().find(".feedback-modal-feedback-type-"+$(this).attr("data-feedback-type")).click();k($(this).get(0));Modals.getFeedbackModal().modal("show")});$(document).on("click","#feedback-modal-next-button",function(){a()&&l(1)});$(document).on("keypress","form input",function(n){var t=n.keyCode||n.which;if(t===Constants.KeyCode.Enter&&!$(n.target).is('input[type="submit"],input[type="button"]'))return n.preventDefault(),$(n.target).is('input[type="checkbox"]')?$(this).prop("checked",$(this).is(":checked")?!1:!0):$(n.target).is('input[type="radio"]')&&$(this).click(),!1});$(document).on("click","#feedback-modal-back-button",function(){l(-1)});$(document).on("click",".feedback-modal-captcha",function(){var n=Modals.getFeedbackModal().find("#feedback-modal-error");n.text().length>0&&n.text("")});$(document).on("click",".feedback-modal-feedback-type-site",function(){$(".question.feedback-type-page > fieldset > .checkboxes .Options").prop("checked",!1);$(".question.feedback-type-page > fieldset > .image-rating .Options").prop("checked",!1);$(".question.feedback-type-page > fieldset > .number-rating .Options").prop("checked",!1);$(".question.feedback-type-page > fieldset > .checkboxes textarea").val("");$(".question.feedback-type-page > fieldset > .captcha > .feedback-modal-captcha").val("")});$(document).on("click",".feedback-modal-feedback-type-site",function(){$(".question.feedback-type-site > fieldset > .checkboxes .Options").prop("checked",!1);$(".question.feedback-type-site > fieldset > .image-rating .Options").prop("checked",!1);$(".question.feedback-type-site > fieldset > .number-rating .Options").prop("checked",!1);$(".question.feedback-type-site > fieldset > .checkboxes textarea").val("");$(".question.feedback-type-site > fieldset > .captcha > .feedback-modal-captcha").val("")});$(document).on("click",".feedback-modal-submit-button",function(n){var f,e,s;n.preventDefault();a()&&(u(r.Loading,!0),f={},Modals.getFeedbackModal().find(".question.feedback-type-"+t+" > fieldset").each(function(){var n=$(this).find(".QuestionType").val(),i;if(n){var u=$(this).find(".QuestionId").val(),r=$(this).find(".Options[type=hidden], .Options:checked").get().map(function(n){return $(n).val()}),t=$(this).find(".Text").val();(r.length||t&&t.length)&&(i=f[n]||[],i.push({QuestionId:u,Options:r,Text:t}),f[n]=i)}}),e={},e[Constants.AntiForgeryToken.Header]=o,s={FeedbackId:Modals.getFeedbackModal().find(".feedback-modal-feedback-id.feedback-type-"+t).val(),PageId:getPageId(),SelectedItems:f,CaptchaAnswer:Modals.getFeedbackModal().find(".feedback-type-"+t+" .feedback-modal-captcha").val()||" "},setTimeout(function(){$.ajax({url:"/dmhgapi/Feedback/FeedbackModal",type:"POST",data:JSON.stringify(s),dataType:"json",contentType:"application/json; charset=utf-8",headers:e}).done(function(n){n.Response.Success?u(r.Finished,!0):(n.Response.ErrorMessages?n.Response.ErrorMessages.forEach(function(n){i(n)}):i("An unknown error occurred! Please try again later."),n.CaptchaQuestion&&v(n.CaptchaQuestion),u(r.Questions,!0))})},500))});$(document).on("click","#feedback-modal-finish-button",function(){Modals.getFeedbackModal().modal("hide")})})(window.FeedbackTab=window.FeedbackTab||{});
function CharacterLimitHandler(n,t,i,r){this.limit=n;this.input=t;this.countContainer=i;this.errorContainer=r;this.inputHandler=null;this.countSrElement=null;this.countElement=null;this.errorElement=null;this.init=function(){if(this.limit){this.countContainer&&(this.countSrElement=$("<div />").appendTo(this.countContainer),this.countSrElement.addClass("sr-only"),this.countElement=$("<div />").appendTo(this.countContainer),this.countElement.addClass("character-limit-count"),this.countElement.attr("aria-hidden",!0));this.updateDomCountElements();this.updateDomErrorElement();this.inputHandler=$.proxy(this.inputEventHandler,this);this.input.on("input change keyup focus",this.inputHandler)}};this.deinit=function(){this.countSrElement&&this.countSrElement.remove();this.countElement&&this.countElement.remove();this.errorElement&&this.errorElement.remove();this.input&&this.input.off("input change keyup focus",this.inputHandler)};this.inputEventHandler=function(){this.updateDomCountElements()};this.getCount=function(){return this.input.val().length};this.isCountOverLimit=function(){return this.getCount()>this.limit};this.updateDomCountElements=function(){if(this.limit&&this.countContainer){var t=this.getCount();this.countSrElement.html("You have used "+t+" characters. There is a limit of "+n+" characters.");this.countElement.html(t+" / "+n);this.isCountOverLimit()?this.countElement.addClass("invalid"):this.countElement.removeClass("invalid")}};this.updateDomErrorElement=function(){if(this.limit&&this.errorContainer)if(this.isCountOverLimit()){this.errorElement&&this.errorElement.remove();this.errorElement=$("<div />").appendTo(this.errorContainer);this.errorElement.addClass("character-limit-error");this.errorElement.attr("role","alert");this.errorElement.attr("aria-atomic","true");this.errorElement.html("Your response is over by "+(this.getCount()-n)+" characters. Please reduce your response.");var t=this;setTimeout(function(){t.input.focus()},500)}else this.errorElement&&(this.errorElement.css({display:"none"}),this.errorElement.remove())};this.validate=function(){return n?(this.updateDomCountElements(),this.updateDomErrorElement(),!this.isCountOverLimit()):!0}};
$(document).ready(function(){function s(n){i.attr("role","alert");i.attr("aria-atomic","true");i.html(n);t.show();accSmoothScrollToElement(t);r.addClass("newsletter-form__field-container--error");setTimeout(function(){$(".validation-error:first").focus()},10)}function f(){t.hide();r.removeClass("newsletter-form__field-container--error")}function h(){var i=!1,t="",r,e;return f(),r=n.val(),e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|('.+'))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,i=e.test(r),i?u.removeClass("invalid"):(t+="Please enter a valid email address",n.addClass("validation-error"),u.addClass("invalid"),t=t,s(t)),i}var c=$(".newsletter"),t=$(".newsletter-form__error-container"),r=$(".newsletter-form__field-container"),i=$(".newsletter-form__alert-text"),u=$("#newsletter-form"),n=$("#newsletter-email-input"),e=$("#newsletter-subscribe-button"),o=$("#newsletter-submit-button");$(n).on("keydown",function(n){var t=n.keyCode;t!==Constants.KeyCode.Tab&&f();t===Constants.KeyCode.Enter&&e.click()});$(document).on("click","#newsletter-subscribe-button",function(t){t.stopPropagation();t.preventDefault();h()&&(o.click(),n.val(""))})});