$(function(){var n=function(){$(".homepage__search-input").on("change keyup keydown",function(){var n=$(this).val();n.length>0?$(".homepage__search-clear-button").addClass("homepage__search-clear-button--show"):$(".homepage__search-clear-button").removeClass("homepage__search-clear-button--show")});$(".homepage__search-input").on("keydown",function(n){n.keyCode===Constants.KeyCode.Enter&&(n.stopPropagation(),n.preventDefault(),$(".homepage__search-submit-button").click())});$(".homepage__search-clear-button").on("click",function(n){n.preventDefault();n.stopImmediatePropagation();$(".homepage__search-input").val("").focus();$(".homepage__search-clear-button").removeClass("homepage__search-clear-button--show")});$(".homepage__search-submit-button").on("click",function(n){n.preventDefault();n.stopImmediatePropagation();$("#homepage__search-input").val().length<1?(store.session.remove(Constants.SessionStorage.CardCache),window.location="/search-resources"):window.location="/search-resources?search="+$(".homepage__search-input").val()});var n=new SearchBarModalHandler($(".homepage__search-input"),null,function(n){$(".homepage__search-input").val(n);$(".homepage__search-submit-button").click()});n.init()},t=function(){var t=$(".homepage__sam-area")[0],i=$(".homepage__sam-background")[0],r=$(".homepage__about-head-to-health-area")[0],u=$(".homepage__about-head-to-health-background")[0],n=function(){var n,f;n=window.innerHeight-t.getBoundingClientRect().top-300;f=Math.max(Math.min(n/500,1),0);i.style.transform="translateY("+-50*f+"px)";n=window.innerHeight-r.getBoundingClientRect().top-300;f=Math.max(Math.min(n/400,1),0);u.style.transform="translateY("+30*(1-f)+"px)"};window.addEventListener("scroll",function(){n()});n()},i=function(){$(".homepage__quick-search-pills").find("a").each(function(){var n=$(this),i=n.text().trim(),t=n.attr("title"),r="";r=t!==undefined&&t!==""?t:Constants.Text.SearchFor+" "+i;n.attr("aria-label",r);n.attr("href","/search-resources?search="+i)})};$(document).ready(function(){n();t();i()})});
function SearchBarModalHandler(n,t,i){this.searchBarModal=null;this.searchInput=null;this.searchButton=null;this.closeButton=null;this.characterLimitErrorContainer=null;this.characterLimitCountContainer=null;this.characterLimitHandler=null;this.toggler=n;this.limit=t;this.callback=i;this.init=function(){var n=Modals.getSearchModal();this.searchBarModal=n;this.searchInput=n.find(".search-bar-modal-search-input");this.searchButton=n.find(".search-bar-modal-submit-button");this.closeButton=n.find(".search-bar-modal-close-button");this.characterLimitErrorContainer=n.find(".search-bar-modal-character-limit-error-container");this.characterLimitCountContainer=n.find(".search-bar-modal-character-limit-count-container");this.setupBindings()};this.setupBindings=function(){this.toggler.off("click").on("click",$.proxy(this.togglerInteractionEventHandler,this));this.toggler.off("focus").on("focus",$.proxy(this.togglerInteractionEventHandler,this));this.searchButton.off("click").on("click",$.proxy(this.searchButtonClickHandler,this));this.searchInput.off("keydown").on("keydown",$.proxy(this.inputKeydownEventHandler,this));this.closeButton.off("click").on("click",$.proxy(this.closeButtonClickHandler,this));this.characterLimitHandler!==null&&this.characterLimitHandler.deinit();this.characterLimitHandler=new CharacterLimitHandler(this.limit,this.searchInput,this.characterLimitCountContainer,this.characterLimitErrorContainer);this.characterLimitHandler.init()};this.togglerInteractionEventHandler=function(n){isMobile()&&(n.preventDefault(),this.searchBarModal.modal("show",$(this.toggler).parents("[tabindex]").first()),this.setupBindings(),setTimeout($.proxy(this.focusSearchInput,this),600))};this.closeButtonClickHandler=function(n){n.preventDefault();this.searchBarModal.modal("hide")};this.focusSearchInput=function(){this.searchInput.focus()};this.searchButtonClickHandler=function(n){n.preventDefault();this.validateAndCallCallback()};this.inputKeydownEventHandler=function(n){n.keyCode===13&&(this.searchInput.change(),n.stopPropagation(),n.preventDefault(),this.validateAndCallCallback())};this.validateAndCallCallback=function(){this.characterLimitHandler.validate()&&(this.callback&&typeof this.callback=="function"&&this.callback(this.searchInput.val()),this.searchInput.blur(),this.searchBarModal.modal("hide"))}};