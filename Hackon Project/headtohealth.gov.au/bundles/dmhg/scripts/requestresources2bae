$(document).ready(function(){function s(n){i.attr("role","alert");i.attr("aria-atomic","true");i.html(n);t.show();accSmoothScrollToElement(t);setTimeout(function(){$(".validation-error:first input").focus()},10)}function p(){t.hide();$(".validation-error").removeClass("validation-error");nt.text("")}function ot(){p();k.remove();tt.remove();c.removeClass("hide").show();accSmoothScrollToElement(c)}function st(){var n=new AntiForgeryToken;n.load(function(n){l=n})}function w(n){if(n)b(n);else{var t=new CaptchaHandler(Constants.Captcha.Url);t.load(b)}}function b(t){g.text(t);n.attr("aria-label",d+" : "+t)}function ht(){var h=!1,i=!1,c=!0,b=!0,k=!0,tt=!0,t="",st,ht,d,g,nt,ct;return o.attr("disabled","disabled"),p(),r.val().length>0?h=!0:(it.text("Enter a contact name"),t+="<br />- contact name",r.parent().addClass("validation-error")),st=u.val(),ht=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|('.+'))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,i=ht.test(st),i||(rt.text("Enter a valid email: example@example.com"),t+="<br />- email address",u.parent().addClass("validation-error")),f.val().length>0?c=!0:(ut.text("Enter an organisation name"),t+="<br />- organisation name",f.parent().addClass("validation-error")),e.val().length>0?b=!0:(ft.text("Enter an organisation URL"),t+="<br />- organisation name",e.parent().addClass("validation-error")),y.is(":checked")?k=!0:(d="Please agree to share your information",et.text(d),t+="<p"+(t.length>10?' class="mt-2"':"")+">"+d+"<\/p>",y.parent().addClass("validation-error")),a&&n.val().length<1&&(g="Please complete the CAPTCHA to continue",v.text(g),t+="<p"+(t.length>10?' class="mt-2"':"")+">"+g+"<\/p>",tt=!1,n.parent().addClass("validation-error")),h&&i&&c&&b&&k&&tt?(nt={},nt[Constants.AntiForgeryToken.Header]=l,ct={ContactName:r.val(),ContactEmail:u.val(),OrganizationName:f.val(),OrganizationUrl:e.val(),CaptchaAnswer:n.val(),UseCaptcha:a,PageId:getPageId()},$.ajax({url:"/dmhgapi/RequestMarketingCollateral/RequestResources",type:"POST",data:JSON.stringify(ct),dataType:"json",contentType:"application/json; charset=utf-8",headers:nt}).done(function(t){if(o.removeAttr("disabled"),t.Response.Success)ot();else{if(t.Response.ErrorMessages){var i="";t.Response.ErrorMessages.forEach(function(n){i+=n});i.indexOf("Captcha")>=0&&(v.text(i),n.addClass("validation-error"));i="<p>"+i+"<\/p>";s(i)}else s("<p>An unknown error occurred! Please try again later.<\/p>");t.CaptchaQuestion&&w(t.CaptchaQuestion)}})):(o.removeAttr("disabled"),h&&i&&c&&b&&k||(t="Please enter a valid: "+t),s(t)),!1}var h=$("#request-resources"),c=$(".success-message"),k=$("p.text-description"),l=null,a=h.attr("data-use-captcha")==="true",d=h.attr("data-captcha-heading"),g=$("#request-resources-form-captcha-span"),n=$("#CaptchaAnswer"),v=$("#CaptchaError"),t=$(".invalid-form-field"),i=$("#invalid-form-field-text-span"),nt=$(".input-msg-div"),tt=$("#request-resources-form"),r=$("#ContactName"),it=$("#ContactNameError"),u=$("#ContactEmail"),rt=$("#ContactEmailError"),f=$("#OrganizationName"),ut=$("#OrganizationNameError"),e=$("#OrganizationUrl"),ft=$("#OrganizationUrlError"),y=$("#PrivacyPolicyCheckbox"),et=$("#PrivacyPolicyCheckboxError"),o=$("#request-resources-form-submit-button");$(document).on("click","#request-resources-form-submit-button",function(n){return n.stopPropagation(),n.preventDefault(),ht(),!1});st();w()});